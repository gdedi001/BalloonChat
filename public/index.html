<!doctype html>
<html>
<head>
	<title>Mercurius - Communication Powered by the gods</title>
	<style>
	  * { 
		  margin: 0; 
		  padding: 0; 
		  box-sizing: border-box; 
		}
		
	  body { 
		  font: 13px Helvetica, Arial; 
		}
		
	  form { 
		  background: #000; 
		  padding: 3px; 
		  position: fixed; 
		  bottom: 0; 
		  width: 80%; 
		}
		
	  form input { border: 0; padding: 10px; width: 83%; margin-right: .5%; }
	  form button { width: 9%; background: rgb(130, 224, 255); border: none; padding: 10px; }
	  #messages {list-style-type: none; margin: 0; padding: 0; }
	  #messages li { padding: 5px 10px; }
	  #messages li:nth-child(odd) { background: #eee; }
	</style>
	  <!-- Bootstrap CDN -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
	<!-- Local CSS 
	<link type="text/css" href="style.css">-->
</head>
<body>
	<div class="container-fluid">
		<div class="row text-center">
			<div class="col-md-12">
				<div id="status">Mercurius is checking your divinity...</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-3" id="channel-sec">
			
			</div>
			<div class="col-md-9" id="main">
				<ul id="messages"></ul>
				<form id="chat_form" action="">
					<input id="chat_input" autocomplete="off" /><button>Send</button>
				</form>
			</div>
		</div>

		
		<!-- jQuery -->
		<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
		<!-- socket.io -->
		<script src="/socket.io/socket.io.js"></script>
		<script>
			var server = io.connect("http://localhost:8080");

			server.on('connect', function(data){
				$('#status').html('Divinity acknowledged, welcome...');
			});

			// SERVER -> CLIENT:MESSAGE event handler 
			server.on('message', function(message){
			  $('#messages').append($('<li>').text(message));
			});

			$('#chat_form').submit(function(e){
				var message = $("#chat_input").val();
				server.emit('message', message);
				$('#messages').append(`<li>${message}</li>`);
				$('#chat_input').val(''); // Make input box blank for new message
				return false; // prevents refresh of page after submit
			});

		</script>
	</div>
</body>
</html>